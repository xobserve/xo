---
title: Templating variables
---

import { Heading } from '@/components/Heading'
import { List, ListItemBad } from '@/components/List'
import Link from 'next/link'
import stats from '@/utils/stats'
import { TipCompat } from '@/components/Tip'

## 模版变量
有了模版变量，我们的仪表盘将变得更加有交互性、更加动态。在以往，你只能把主机名、应用名等字段硬编码到查询语句中，这样你想要为每一个主机名 都创建一条语句，有了变量后，你只要在查询语句中使用变量，然后在仪表盘中选择变量，就可以轻松切换主机、应用，一套查询语句就够了

Datav的模版变量与grafana几乎是一致的,但是也有不同，想象一下，如果多个仪表盘要共用一个变量，你该如何解决？这里就需要
使用到全局变量了。

## 添加本地变量
如果你已经熟悉Grafana，那么这部分内容与grafana几乎一致。
1. 进入之前创建的仪表盘，打开设置面板
2. 在左边的导航栏选择**模版变量**
3. 点击创建模版变量
4. **名称**填写 `job` ，**类型**选择 `custom`, **值，逗号分割**填写 `/user/login,/user/logout,/user/info`
5. 点击创建，回退到仪表盘页面

此时，在导航栏的下面，出现了一个`url`的选择框，并且帮助我们自动选择了`/user/login`，接下来，来使用下`url`变量:
1. 点击之前创建的图表的顶部，当前名称应该是`Panel Title`
2. 在弹出的下拉面板中，选择编辑,进入编辑图表页面
3. 在右侧的**设置 -> 图表名称**中，输入`$url`
4. 点击右上角的应用，返回仪表盘页面
5. 保存仪表盘
此时，你应该能看到该图表的名称成功的使用了当前的`url`变量的值。

<TipCompat>由于这里是本地变量，因此只能在当前仪表盘生效，切换到其它仪表盘后，是看不到该变量的</TipCompat>

## 添加全局变量
现在我们再来添加一个全局变量`app`，用来代表当前选择的应用，因为一个应用可能有多个仪表盘，这些仪表盘应该共享一个变量，而不是为每个仪表盘
都创建一个本地变量`app`

1. 在左侧菜单栏选择**配置管理 -> 全局变量**
2. 此时，你会发现自己进入了一个空的仪表盘，因为我们其实就是用的该仪表盘的本地变量来作为全局变量
3. 设置 -> 模版变量 -> 创建新变量
4. **名称**填写`app`, **类型**选择`custom`, **值，逗号分割**填写 `sms,gateway,mysql`
5. 点击创建，回退到仪表盘页面
6. 保存仪表盘

来验证下效果，先在当前这个全局变量仪表盘把`app`设置为`mysql`, 然后进入我们之前创建的仪表盘，你会在右上角看到`app`的选择框，同时值已经被设置为了
`mysql`, 如果愿意，你可以再创建一个仪表盘，观察是否存在该全局变量。


至此，我们的新手引导已经全部结束，你可以在**进阶教程**系列，了解到更加全面、详细的内容。